---
id: req-001
title: "Remove milestone runner and prompt code"
group: "deletion"
dependsOn: []
files:
  creates: []
  modifies:
    - src/runner/loop.ts
    - src/runner/prompt.ts
acceptance:
  - "runRalphLoop() function is deleted from src/runner/loop.ts"
  - "readMilestoneSection() and buildPrompt() are deleted from src/runner/prompt.ts"
  - "parseMilestoneNumber() and parseMilestoneName() are deleted from src/runner/loop.ts"
  - "All imports of deleted functions are removed from loop.ts (readMilestoneSection, readStatus, updateMilestoneStatus, findNextPending, discoverStatuses, syncMilestoneStart, syncMilestoneComplete)"
  - "runGraphLoop() still works — its imports and logic are preserved intact"
  - "npx tsc --noEmit passes"
---

## Context
The runner has two execution paths: `runRalphLoop()` (milestone-based) and `runGraphLoop()` (graph-based). The milestone path is dead code — all projects now use graphs. This requirement removes the milestone path while preserving the graph path.

## Technical Approach
1. In `src/runner/loop.ts`:
   - Delete `runRalphLoop()` (lines 103-209) and its helper functions `parseMilestoneNumber()`, `parseMilestoneName()`, `worktreePath()`
   - Remove imports only used by the milestone path: `readStatus`, `updateMilestoneStatus`, `findNextPending`, `discoverStatuses` from status.ts, `readMilestoneSection` from prompt.ts, `syncMilestoneStart`, `syncMilestoneComplete` from sync.ts
   - Keep all graph-related imports and `runGraphLoop()` intact

2. In `src/runner/prompt.ts`:
   - Delete `readMilestoneSection()` (lines 10-35) and `buildPrompt()` (lines 56-82)
   - Delete the `readFile` import (only used by readMilestoneSection)
   - Keep `formatVerifyErrors()` (used by buildRequirementPrompt) and `buildRequirementPrompt()`

## Interview Notes
User confirmed: graph is the only execution path. All milestone code is dead. Sacred: src/graph/* must not be modified.
