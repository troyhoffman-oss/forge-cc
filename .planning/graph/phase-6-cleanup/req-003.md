---
id: req-003
title: "Remove milestone CLI paths and legacy sync commands"
group: "deletion"
dependsOn:
  - req-002
files:
  creates: []
  modifies:
    - src/cli.ts
    - src/linear/sync.ts
acceptance:
  - "forge run command no longer calls detectFormat() — directly calls runGraphLoop()"
  - "forge status command no longer shows PRD-based projects (remove the legacy status section lines 159-176)"
  - "sync-start and sync-complete CLI commands are removed (they use --milestone flag and PRDStatus)"
  - "syncMilestoneStart, syncMilestoneComplete, syncProjectDone, syncProjectPlanned are removed from sync.ts if they depend on PRDStatus"
  - "Graph-based sync functions (syncRequirementStart, syncGraphProjectDone) are preserved"
  - "npx tsc --noEmit passes"
---

## Context
The CLI still has the dual-format bridge in `forge run` (calls detectFormat then dispatches to either loop), legacy PRD status display, and milestone-based sync commands. With the milestone runner and types gone, these need cleanup.

## Technical Approach
1. In `src/cli.ts`:
   - `forge run`: Remove `detectFormat` import and conditional. Always call `runGraphLoop()`.
   - `forge status`: Remove the "PRD-based projects (legacy)" block (lines 159-176) that calls `discoverStatuses`, `findNextPending`, and reads `s.milestones`. Keep the graph-based status display.
   - Remove imports: `detectFormat`, `readStatus`, `discoverStatuses`, `findNextPending`, `PRDStatus`, `syncMilestoneStart`, `syncMilestoneComplete`
   - Remove `withSyncContext()` helper if no remaining commands use it
   - Remove `sync-start` and `sync-complete` commands (lines 363-384)
   - Keep `sync-done` and `sync-planned` if they can be adapted to work with graph index, OR remove them if they only work with PRDStatus
   - Remove `list-issues` command if it depends on PRDStatus (line 408-422)

2. In `src/linear/sync.ts`:
   - Delete `syncMilestoneStart()`, `syncMilestoneComplete()`, `syncProjectDone()`, `syncProjectPlanned()` — all depend on PRDStatus
   - Keep `syncRequirementStart()` and `syncGraphProjectDone()` — these use GraphIndex
   - Remove the `PRDStatus` import
   - Keep the `GraphIndex` import and `SyncResult` type

## Interview Notes
User confirmed: remove all milestone-specific CLI commands. Graph sync functions are the keepers. The `withSyncContext` helper reads PRDStatus files so it goes too.
