---
id: req-002
title: "Remove milestone types, status module, and detect"
group: "deletion"
dependsOn:
  - req-001
files:
  creates: []
  modifies:
    - src/types.ts
    - src/state/status.ts
    - src/runner/detect.ts
acceptance:
  - "MilestoneStatus interface is deleted from src/types.ts"
  - "PRDStatus interface is deleted from src/types.ts (or kept only if still imported elsewhere — check first)"
  - "milestoneStatusSchema, prdStatusSchema, updateMilestoneStatus, discoverStatuses, findNextPending are deleted from src/state/status.ts"
  - "src/runner/detect.ts is deleted entirely — graph is the only format"
  - "npx tsc --noEmit passes"
---

## Context
After req-001 removes the milestone runner, these types and utilities become dead code. `MilestoneStatus` and `PRDStatus` types are only used by the milestone runner and CLI sync commands. `detectFormat()` is the dual-format bridge — with only graph format remaining, it's unnecessary.

## Technical Approach
1. In `src/types.ts`:
   - Delete `MilestoneStatus` interface (lines 29-33)
   - Delete `PRDStatus` interface (lines 36-44) — verify no remaining imports first. The CLI sync commands (sync-start, sync-done, etc.) use it, but those will be removed in req-003. If tsc complains, keep PRDStatus temporarily and note it for req-003.

2. In `src/state/status.ts`:
   - Delete `milestoneStatusSchema`, `prdStatusSchema`, `updateMilestoneStatus`, `discoverStatuses`, `findNextPending`
   - Keep `readStatus` and `writeStatus` ONLY if still needed by CLI sync commands (they'll be removed in req-003). If nothing else imports them, delete the entire file.

3. Delete `src/runner/detect.ts` entirely.

4. Update any remaining imports that reference deleted exports — remove them.

## Interview Notes
User confirmed: delete detect.ts entirely, no more dual-format. The sequential dependency chain (req-001 → req-002 → req-003) prevents broken intermediate states where types are deleted before their consumers.
